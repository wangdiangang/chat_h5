(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-chat-copy-index"],{"6f1e":function(t,e,a){"use strict";a.r(e);var n=a("d45f"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(s);e["default"]=i.a},7830:function(t,e,a){"use strict";var n=a("82a4"),i=a.n(n);i.a},"82a4":function(t,e,a){var n=a("9b9e");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("33423065",n,!0,{sourceMap:!1,shadowMode:!1})},"84d6":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"chat-container"},[a("v-uni-scroll-view",{staticClass:"message-list",style:{paddingBottom:t.inputAreaHeight+"px"},attrs:{"scroll-y":!0,"scroll-top":t.scrollTop,"scroll-with-animation":!0}},t._l(t.messages,(function(e,n){return a("v-uni-view",{key:n,class:["message-item",e.role]},[a("v-uni-view",{staticClass:"avatar"},[a("v-uni-text",[t._v(t._s("user"===e.role?"我":"AI"))])],1),a("v-uni-view",{staticClass:"message-content"},[t._v(t._s(e.content))])],1)})),1),a("v-uni-view",{staticClass:"input-area-out"},[a("v-uni-view",{staticClass:"input-area",on:{touchstart:function(e){arguments[0]=e=t.$handleEvent(e),t.measureInputHeight.apply(void 0,arguments)}}},[a("v-uni-input",{staticClass:"input-box",attrs:{placeholder:"请输入消息..."},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage.apply(void 0,arguments)}},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}}),a("v-uni-button",{staticClass:"send-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.sendMessage.apply(void 0,arguments)}}},[t._v("发送")])],1)],1)],1)},i=[]},"9b9e":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,".chat-container[data-v-dd4846da]{height:100vh;display:flex;flex-direction:column;padding-top:%?100?%}.message-list[data-v-dd4846da]{flex:1;padding:%?20?%}.message-item[data-v-dd4846da]{display:flex;margin-bottom:%?30?%;align-items:flex-start}.message-item.user[data-v-dd4846da]{flex-direction:row-reverse}.avatar[data-v-dd4846da]{width:%?80?%;height:%?80?%;border-radius:50%;background:#07c160;display:flex;justify-content:center;align-items:center;color:#fff;font-weight:700;margin:0 %?20?%}.user .avatar[data-v-dd4846da]{background:#1989fa}.message-content[data-v-dd4846da]{max-width:60%;padding:%?20?%;border-radius:%?10?%;word-break:break-word}.assistant .message-content[data-v-dd4846da]{background:#f1f1f1}.user .message-content[data-v-dd4846da]{background:#95ec69}.input-area-out[data-v-dd4846da]{position:fixed;bottom:0;width:100%}.input-area[data-v-dd4846da]{padding:%?20?%;border-top:1px solid #eee;display:flex;background:#fff}.input-box[data-v-dd4846da]{flex:1;border:1px solid #ddd;border-radius:%?40?%;padding:%?20?%;margin-right:%?20?%}.send-btn[data-v-dd4846da]{background:#07c160;color:#fff;border-radius:%?40?%;padding:0 %?30?%}",""]),t.exports=e},d45f:function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("14d9"),a("498a"),a("ac1f");var n={data:function(){return{loading:!1,messages:[{role:"assistant",content:"你好！我是AI助手"}],inputText:"",scrollTop:0,inputAreaHeight:0}},mounted:function(){this.measureInputHeight()},methods:{getChat:function(e){var a=this;console.log("执行"),this.loading=!0,t.callFunction({name:"getchat",data:{message:e},timeout:5e4}).then((function(t){a.messages.pop();var e=t.result.content;a.messages.push({content:e,role:"assistant"}),a.loading=!1,a.$nextTick((function(){a.scrollToBottom()}))})).catch((function(t){a.loading=!1,a.messages.pop(),uni.showToast({icon:"none",title:"生成失败，重新生成"})}))},sendMessage:function(){this.inputText.trim()&&(this.loading?uni.showToast({icon:"none",title:"生成中。。。"}):(this.messages.push({role:"user",content:this.inputText}),this.messages.push({role:"assistant",content:"生成中。。。"}),this.getChat(this.inputText),this.inputText=""))},scrollToBottom:function(){var t=this;this.$nextTick((function(){var e=uni.createSelectorQuery().in(t);e.select(".message-list").boundingClientRect((function(e){t.scrollTop=2*e.height})).exec()}))},measureInputHeight:function(){var t=this,e=uni.createSelectorQuery().in(this);e.select(".input-area").boundingClientRect((function(e){t.inputAreaHeight=e.height})).exec()}}};e.default=n}).call(this,a("a9ff")["default"])},fc70:function(t,e,a){"use strict";a.r(e);var n=a("84d6"),i=a("6f1e");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(s);a("7830");var o=a("f0c5"),d=Object(o["a"])(i["default"],n["b"],n["c"],!1,null,"dd4846da",null,!1,n["a"],void 0);e["default"]=d.exports}}]);